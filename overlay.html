<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>3PT Overlay</title>
<style>
body{margin:0;background:transparent;font-family:Arial;color:white;}
.wrap{
position:absolute;
left:40px;
bottom:40px;
background:#111;
padding:20px;
border-radius:14px;
box-shadow:0 10px 40px rgba(0,0,0,.6);
transition:width .5s ease;
overflow:hidden;
}

.top{display:flex;gap:20px;margin-bottom:18px;}
.box{background:#1a1a1a;padding:14px 22px;border-radius:10px;}
.label{font-size:12px;opacity:.6;text-transform:uppercase;}
.big{font-size:30px;font-weight:800;}

.racks{display:flex;gap:16px;}

.rack{
width:220px;
padding:14px;
border-radius:12px;
background:#1a1a1a;
opacity:0;
transform:translateY(10px);
transition:all .4s ease;
}

.rack.visible{opacity:1;transform:translateY(0);}
.rack.active{outline:3px solid #3b82f6;transform:scale(1.05);}
.rack.money{outline:3px solid gold;}

.title{font-size:13px;margin-bottom:8px;text-transform:uppercase;opacity:.7;}
.dots{display:flex;gap:8px;}

.dot{
width:22px;
height:22px;
border-radius:50%;
background:#333;
}

.dot.made{background:#22c55e;}
.dot.miss{background:#ef4444;}
.dot.money{border:3px solid gold;}
</style>
</head>
<body>

<div class="wrap" id="wrap">
<div class="top">
<div class="box">
<div class="label">Shooter</div>
<div class="big" id="player">PLAYER</div>
</div>
<div class="box">
<div class="label">Score</div>
<div class="big" id="score">0</div>
</div>
<div class="box">
<div class="label">Time</div>
<div class="big" id="time">70.0</div>
</div>
</div>

<div class="racks" id="rackContainer"></div>
</div>

<script>
const API="https://jsonblob.com/api/jsonBlob/019c542f-f9ad-731c-addd-a35c2ca9abd9";
const rackNames=["CORNER","WING","TOP KEY","WING","CORNER"];

async function getState(){
let r=await fetch(API);
return await r.json();
}

function isMoney(s,r,b){
return r===s.moneyRack || b===4;
}

async function render(){
let s=await getState();

document.getElementById("player").textContent=s.player;
document.getElementById("score").textContent=s.score;
document.getElementById("time").textContent=(s.timeLeft/1000).toFixed(1);

let container=document.getElementById("rackContainer");
container.innerHTML="";

for(let r=0;r<5;r++){
let div=document.createElement("div");
div.className="rack";
if(r<=s.rackIndex) div.classList.add("visible");
if(r===s.rackIndex) div.classList.add("active");
if(r===s.moneyRack) div.classList.add("money");

let title=document.createElement("div");
title.className="title";
title.textContent=rackNames[r];
div.appendChild(title);

let dots=document.createElement("div");
dots.className="dots";

for(let b=0;b<5;b++){
let d=document.createElement("div");
d.className="dot";
if(isMoney(s,r,b)) d.classList.add("money");
if(s.balls[r][b]==="made") d.classList.add("made");
if(s.balls[r][b]==="miss") d.classList.add("miss");
dots.appendChild(d);
}

div.appendChild(dots);
container.appendChild(div);
}

let wrap=document.getElementById("wrap");
let baseWidth=350;
let rackWidth=240;
wrap.style.width=baseWidth+((s.rackIndex+1)*rackWidth)+"px";
}

setInterval(render,500);
render();
</script>
</body>
</html>
