<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>3PT Control</title>
<style>
body{background:#111;color:white;font-family:Arial;padding:20px;}
button{padding:12px;margin:5px;font-size:16px;border:none;border-radius:8px;cursor:pointer;}
.make{background:#22c55e;}
.miss{background:#ef4444;}
.gold{background:gold;color:black;}
.blue{background:#3b82f6;}
input,select{padding:8px;margin:5px;font-size:16px;}
</style>
</head>
<body>

<h2>3PT Control</h2>

<input id="playerInput" placeholder="Player Name">
<select id="moneyRackSelect">
<option value="0">Rack 1</option>
<option value="1">Rack 2</option>
<option value="2" selected>Rack 3</option>
<option value="3">Rack 4</option>
<option value="4">Rack 5</option>
</select>

<br><br>

<button class="blue" onclick="start()">Start</button>
<button onclick="pause()">Pause</button>
<button onclick="resetRound()">Reset</button>

<br><br>

<button class="make" onclick="shot('made')">MAKE</button>
<button class="gold" onclick="shot('made',2)">MAKE +2</button>
<button class="miss" onclick="shot('miss')">MISS</button>

<script>
function getState(){
return JSON.parse(localStorage.getItem("threePTState")) || {
player:"PLAYER",
score:0,
timeLeft:60000,
running:false,
rackIndex:0,
ballIndex:0,
moneyRack:2,
balls:Array.from({length:5},()=>Array.from({length:5},()=>null))
};
}

function save(s){
localStorage.setItem("threePTState",JSON.stringify(s));
}

document.getElementById("playerInput").addEventListener("input",function(){
let s=getState();
s.player=this.value || "PLAYER";
save(s);
});

document.getElementById("moneyRackSelect").addEventListener("change",function(){
let s=getState();
s.moneyRack=parseInt(this.value);
save(s);
});

function start(){let s=getState();s.running=true;save(s);}
function pause(){let s=getState();s.running=false;save(s);}

function resetRound(){
let s=getState();
s.score=0;
s.timeLeft=60000;
s.running=false;
s.rackIndex=0;
s.ballIndex=0;
s.balls=Array.from({length:5},()=>Array.from({length:5},()=>null));
save(s);
}

function shot(type,force=null){
let s=getState();
let r=s.rackIndex,b=s.ballIndex;
if(s.balls[r][b]!=null)return;

s.balls[r][b]=type;

if(type==="made"){
let pts=force!=null?force:(r===s.moneyRack||b===4?2:1);
s.score+=pts;
}

b++;
if(b>=5){b=0;r++;}
s.rackIndex=Math.min(4,r);
s.ballIndex=Math.min(4,b);

save(s);
}
</script>
</body>
</html>
